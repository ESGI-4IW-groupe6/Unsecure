language: php
php:
  - '5.6'
  - '7.0'
allow_failures:
  - php: 7.0

services:
  - docker

matrix:
  fast_finish: true
  include:
    - env:
      - PHP_CS_FIXER_VERSION=2.7.1
      - IS_LATEST=1

before_script:
  - docker build --rm --tag herloct/php-cs-fixer:$PHP_CS_FIXER_VERSION-$TRAVIS_BRANCH .
  - docker run --rm herloct/php-cs-fixer:$PHP_CS_FIXER_VERSION-$TRAVIS_BRANCH

script:
  - docker run --rm
    --volume $(pwd):/project
    herloct/php-cs-fixer:$PHP_CS_FIXER_VERSION-$TRAVIS_BRANCH fix -vv --dry-run

notifications:
  email:
    - wdelenclos@gmail.com
  slack: esgi-iw:jMKTnfcE3dCoMIaUT3isyCbk